---
title: python Relative precedence of := 海象运算符 翻译
date: 2020-02-06 12:00:00
category:
- note
tag:
- python
- translate
---

> PS：机翻

在所有合法的语法位置上，海象运算符 groups 更接近逗号，不接近其他所有运算符（包括 or，and，not，以及条件表达式（A if C else B）。 如上文”例外情况”部分所述，绝不允许与 = 相同的 group。 如果需要不同的分组，则应使用括号。

海象运算符可以直接在位置函数调用参数中使用，但是它在关键字参数中是无效的。

面是一些例子来说明什么在技术上是有效的或者无效的:

``` python

# INVALID
x := 0

# Valid alternative
(x := 0)

# INVALID
x = y := 0

# Valid alternative
x = (y := 0)

# Valid
len(lines := f.readlines())

# Valid
foo(x := 3, cat='vector')

# INVALID
foo(cat=category := 'vector')

# Valid alternative
foo(cat=(category := 'vector'))

```

上面的大多数“有效”示例都不推荐，因为阅读 Python 源代码的人在快速浏览某些代码时可能会忽略其中的区别。 但简单的情况并不令人反感:

``` python
# Valid
if any(len(longline := line) >= 100 for line in lines):
    print("Extremely long line:", longline)
```

这个 PEP 建议总是在: 左右放置空格，类似于 PEP 8对用于分配的建议，而后者不允许在关键字参数周围使用空格

---

## 附录

- [捕蛇者说 | Ep 05. 聊聊单元测试最佳实践和 PEP 572](https://www.pythonhunter.org/episodes/5)

- [pep-0572/#relative-precedence-of](https://www.python.org/dev/peps/pep-0572/#relative-precedence-of)
